<style type="text/css">label{
    font-weight: 600;
    color: #003262;
  }
h2 label{
     font-size:1.5rem;
}

  input[type="text"],
  input[type="number"],
  select {
    width: 100%;
    padding: 10px;
    margin-top: 4px;
    margin-bottom: 4px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 16px;
    box-sizing: border-box;
  }

  input[type="number"] {
    width: calc(45% - 8px);
    display: inline-block;
  }

  select {
    width: calc(45% - 8px);
    display: inline-block;
    margin-left: 10px;
  }

/*  .autocomplete-wrapper {
    position: relative;
  }*/

  .autocomplete-dropdown {
    display: none;
    position: absolute;
    background-color: white;
    border: 1px solid #ccc;
    z-index: 1000;
    max-height: 200px;
    overflow-y: auto;
    width: 100%;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    border-radius: 6px;
  }

  .autocomplete-item {
    padding: 10px;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .autocomplete-item:hover {
    background-color: #f0f0f0;
  }

  .button {
    background-color: #CDAA00;
    color: #005B99;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    text-decoration: none;
    transition: transform 0.2s, background-color 0.3s;
    display: inline-block;
    text-align: center;
    font-size: 16px;
    font-weight: bold;
  }

  .button:hover {
    background-color: #005B99;
    color: #FFFFFF;
    transform: translateY(-2px);
  }

  .button:active {
    transform: translateY(2px);
  }
.time-row {
    display: flex;
flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    margin-bottom: 20px;
  }

  .time-row input[type="number"] {
  width: 60px;
  height: 35px;
  text-align: center;
  font-size: 14px;
  border-radius: 6px;
  box-sizing: border-box;
}

  .time-row select {
    width: 80px;
  }

  .time-label {
    margin-bottom: 5px;
    display: block;
    font-weight: 600;
    color: #003262;
  }

  #result-table {
    margin-top: 30px;
    padding: 15px;
    background: #ffffff;
    border: 1px solid #ddd;
    border-radius: 6px;
    min-height: 30px;
    color: #333;
  }

#ampm {
  height: 35px;
  width: 80px; /* Adjust as needed */
  padding: 4px 8px;
  font-size: 14px;
  line-height: 1.1;
  border-radius: 6px;
  box-sizing: border-box;
  vertical-align: middle;
}
#taskForm label {
  margin-bottom: -20px; /* or smaller like 2px */
  padding: 0;
}
</style>
<div><!--<h2><label for="start">Trip Planner: A Love Poem</label></h2>

	<p>The love of my life, a project made with such a fire and passion, only comparable to that of human love between two people destined to be with each other for all eternity. Truly, I cannot tell you anything else in my life of greater importance than the&nbsp;<strong><em>CatTracks Trip Planner<sup>(tm)</sup></em></strong>. The puspose of my life has truly peaked at the creation of this software. I can die happy in the comfort and solace knowing that it shall revolutionize the future of the city of Merced and improve their... dated public transit infrastructure. When I leave this campus, take good care of my beloved.<br />
		<br />
		Alright bub, that&#39;s enough romance novels for you. Get off inspect element and get back to work!</p>

	<p style="text-align: right">- Jonny K</p>-->
	<p style="text-align: center;">The UC Merced Trip Planner is an online tool that helps users find transit routes and schedules using CatTracks and Route UC services. By entering trip details, users can view customized travel options. It serves as a convenient way to explore the City of Merced and plan out any trip for each day!</p>

	<h2><label for="start">Start Location:</label></h2>

	<div class="autocomplete-wrapper"><input autocomplete="off" id="start" placeholder="Start location" type="text" />
		<div class="autocomplete-dropdown" id="start-autocomplete">&nbsp;</div>
	</div>
</div>

<h2><label for="end">End Location:</label></h2>

<div>
	<div class="autocomplete-wrapper"><input autocomplete="off" id="end" placeholder="End location" type="text" />
		<div class="autocomplete-dropdown" id="end-autocomplete">&nbsp;</div>
	</div>
</div>

<table border="0" cellpadding="1" cellspacing="1" style="width:100%; table-layout: fixed">
	<tbody style="border-top: none">
		<tr>
			<td>
				<div>
					<div>
						<h2><label class="time-label" for="hour">Time:</label></h2>
						<label><input checked="checked" name="timeMode" type="radio" value="depart" /> Depart After</label> <label><input name="timeMode" type="radio" value="arrive" /> Arrive By</label></div>

					<div class="time-row"><input id="hour" max="12" maxlength="2" min="1" placeholder="12" type="number" /> : <input id="minute" max="59" maxlength="2" min="0" placeholder="00" type="number" /> <select id="ampm"><option>AM</option><option>PM</option> </select></div>

					<div>
						<h2>&nbsp;</h2>

						<h2><label class="time-label">Schedule Type:</label></h2>
						<label><input checked="checked" name="scheduleType" type="radio" value="weekday" /> Weekday</label> <label><input name="scheduleType" type="radio" value="weekend" /> Weekend</label></div>
				</div>
			</td>
			<td>
				<div>
					<div>
						<h2><label for="routes_list">Routes Filter:</label></h2>
					</div>

					<div>
						<table border="0" cellpadding="1" cellspacing="1" style="width:100%;">
							<tbody style="border-top: none">
								<tr>
									<td>
										<form id="taskForm"><label><input name="route_name" type="checkbox" value="Bobcat Express" /> Bobcat Express</label><br />
											<label><input name="route_name" type="checkbox" value="C-1" /> C-1</label><br />
											<label><input name="route_name" type="checkbox" value="C-2" /> C-2</label><br />
											<label><input name="route_name" type="checkbox" value="G-Line" /> G-Line</label><br />
											<label><input name="route_name" type="checkbox" value="FastCat" /> FastCat</label><br />
											<label><input name="route_name" type="checkbox" value="FastCat 2" /> FastCat 2</label><br />
											<label><input name="route_name" type="checkbox" value="Yosemite Express" /> Yosemite Express</label><br />
											<label><input name="route_name" type="checkbox" value="E-1" /> E-1</label><br />
											<label><input name="route_name" type="checkbox" value="E-2" /> E-2</label><br />
											<label><input name="route_name" type="checkbox" value="Route UC (North Loop)" /> Route UC (North Loop)</label><br />
											<label><input name="route_name" type="checkbox" value="Route UC (South Loop)" /> Route UC (South Loop)</label></form>
									</td>
									<td>
										<p><button onclick="selectAll()">Select All</button></p>

										<p>&nbsp;</p>

										<p><button onclick="deselectAll()">Deselect All</button></p>

										<p>&nbsp;</p>

										<p><button onclick="summerRoutes()">Summer Routes</button></p>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</td>
		</tr>
	</tbody>
</table>

<h2 style="text-align: center;"><button class="button" onclick="planTrip()">Plan Trip</button></h2>

<div id="result-table">
	<div id="result-header">&nbsp;</div>

	<table border="0" cellpadding="1" cellspacing="1" style="width:100%;">
		<tbody style="border-top: none">
			<tr>
				<td style="width: 49%; vertical-align: top;">
					<div id="fastest-result">&nbsp;</div>
				</td>
				<td style="width: 49%; vertical-align: top;">
					<div id="optimized-result">&nbsp;</div>
				</td>
			</tr>
		</tbody>
	</table>

	<p>&nbsp;</p>
</div>
<!--<div id="results">&nbsp;</div>-->

<p style="text-align: center;">&nbsp;</p>

<p style="text-align: center;">&nbsp;</p>

<p style="text-align: center;">&nbsp;</p>

<p style="text-align: center; font-size: 12px"><b>This program is intended to be used as a helpful tool rather than a complete replacement of using the provided schedules in the routes page. Please use the route schedules for every bus line provided&nbsp;<a href="https://taps.ucmerced.edu/transportation/cattracks-and-route-uc/routes">here</a>&nbsp;to verify the bus times given by this program. If you ever find any issues or&nbsp;inaccuracies presented by this&nbsp;program, please send an email, preferably with screenshots and steps to recreate it, to <a href="mailto:jnardello@ucmerced.edu?subject=CatTracks%20Trip%20Planner%20Issue">jnardello@ucmerced.edu</a>.</b></p>
<script>
    const routesData = [
      {
        route: "Bobcat Express",
        weekday: [
          {stop: "R Street Village Apartments", times: [389, 429, 469, 524, 564, 604, 644, 729, 829, 917, 1017, 1102, 1202]},
          {stop: "El Redondo Drive (Jenner Drive)", times: [392, 432, 472, 527, 567, 607, 647, 732, 832, 920, 1020, 1105, 1205]},
          {stop: "Compass Pointe Apartments (Pacific Drive)", times: [394, 434, 474, 529, 569, 609, 649, 734, 834, 922, 1022, 1107, 1207]},
          {stop: "Merced College The Bus Terminal", times: [399, 439, 479, 534, 574, 614, 654, 739, 839, 927, 1027, 1112, 1212]},
          {stop: "M Street & Bellevue Road (Bellevue Ranch)", times: [404, 444, 484, 539, 579, 619, 660, 745, 845, 933, 1033, 1118, 1218]},
          {stop: "University Transit Center (UTC)", times: [415, 455, 510, 550, 590, 630, 671, 771, 856, 959, 1044, 1144, 1229]},
          {stop: "Promenade Center", times: [680, 780, 865, 968, 1053, 1153]},
          {stop: "Merced Mall / Target", times: [689, 789, 877, 977, 1062, 1162]},
          {stop: "Walmart (Loughborough Drive)", times: [698, 798, 886, 986, 1071, 1171]},
          {stop: "Amtrak Train Station", times: [710, 810, 898, 998, 1083, 1183, 1280]},
          {stop: "K Street Between 18th Street & 19th Street", times: [712, 812, 900, 1000, 1085, 1185]},
          {stop: "Merced Transpo", times: [717, 815, 905, 1005, 1090, 1190]},
          {stop: "Rite Aid/Walgreens (G Street)", times: [722, 822, 910, 1010, 1095, 1195]},
          {stop: "El Portal Plaza (G Street)", times: [723, 823, 911, 1011, 1096, 1196]},
          {stop: "R Street Village Apartments", times: [729, 829, 917, 1017, 1102, 1202]},
        ]
      },
      {
        route: "C-1",
        weekday: [
          {stop: "Granville Apartments", times: [380, 451, 537, 608, 694, 765, 856, 927, 1013, 1084, 1155, 1241, 1312]},
          {stop: "G Street & West Alexander Avenue", times: [392, 463, 549, 620, 706, 777, 868, 939, 1025, 1096, 1167, 1253, 1324]},
          {stop: "Rite Aid/Walgreens (G Street)", times: [394, 465, 551, 622, 708, 779, 870, 941, 1027, 1098, 1169, 1255, 1326]},
          {stop: "El Portal Plaza (G Street)", times: [396, 467, 553, 624, 710, 781, 872, 943, 1029, 1100, 1171, 1257, 1328]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [399, 470, 556, 627, 713, 784, 875, 946, 1032, 1103, 1174, 1260, 1331]},
          {stop: "M Street & Bellevue Road (Bellevue Ranch)", times: [405, 476, 562, 633, 719, 790, 881, 952, 1038, 1109, 1180, 1266, 1337]},
          {stop: "University Transit Center (UTC)", times: [416, 502, 573, 659, 730, 816, 892, 978, 1049, 1120, 1206, 1277, 1348]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [426, 512, 583, 669, 740, 826, 902, 988, 1059, 1130, 1216, 1287, 1287]},
          {stop: "El Portal Plaza (G Street)", times: [429, 515, 586, 672, 743, 829, 905, 991, 1062, 1133, 1219, 1290, 1290]},
          {stop: "G Street & West Alexander Avenue", times: [434, 520, 591, 677, 748, 834, 910, 996, 1067, 1138, 1224, 1295, 1295]},
          {stop: "Granville Apartments", times: [451, 537, 608, 694, 765, 856, 927, 1013, 1084, 1155, 1241, 1312, 1312]},
        ]
      },
      {
        route: "C-2",
        weekday: [
          {stop: "R Street Village Apartments", times: [380, 438, 511, 569, 642, 700, 773, 831, 892, 950, 1023, 1081, 1154, 1212, 1285]},
          {stop: "El Redondo Drive (Jenner Drive)", times: [383, 441, 514, 572, 645, 703, 776, 834, 895, 953, 1026, 1084, 1157, 1215, 1288]},
          {stop: "Compass Pointe Apartments (Pacific Drive)", times: [385, 443, 516, 574, 647, 705, 778, 836, 897, 955, 1028, 1086, 1159, 1217, 1290]},
          {stop: "Buena Vista Drive", times: [392, 450, 523, 581, 654, 712, 785, 843, 904, 962, 1035, 1093, 1166, 1224, 1297]},
          {stop: "Merced Mall / Target", times: [399, 457, 530, 588, 661, 719, 792, 853, 911, 969, 1042, 1100, 1173, 1231, 1304]},
          {stop: "M Street Village Apartments", times: [401, 459, 532, 590, 663, 721, 794, 855, 913, 971, 1044, 1102, 1175, 1233, 1306]},
          {stop: "Merced College The Bus Terminal", times: [405, 463, 536, 594, 667, 725, 798, 859, 917, 975, 1048, 1106, 1179, 1237, 1310]},
          {stop: "Cardella Road & M Street", times: [408, 466, 539, 597, 670, 728, 801, 862, 920, 978, 1051, 1109, 1182, 1240, 1313]},
          {stop: "M Street & Bellevue Road (Bellevue Ranch)", times: [411, 469, 542, 600, 673, 731, 804, 865, 923, 981, 1054, 1112, 1185, 1243, 1316]},
          {stop: "University Transit Center (UTC)", times: [422, 495, 553, 626, 684, 757, 815, 876, 934, 1007, 1065, 1138, 1196, 1269, 1327]},
          {stop: "Foothill Drive", times: [429, 502, 560, 633, 691, 764, 822, 883, 941, 1014, 1072, 1145, 1203, 1276, 1334]},
          {stop: "Cardella Road & M Street", times: [433, 506, 564, 637, 695, 768, 826, 887, 945, 1018, 1076, 1149, 1207, 1280, 1341]},
          {stop: "R Street Village Apartments", times: [438, 511, 569, 642, 700, 773, 831, 892, 950, 1023, 1081, 1154, 1212, 1285, 1348]},
        ]
      },
      {
        route: "G-Line",
        weekday: [
          {stop: "R Street Village Apartments", times: [390, 458, 541, 609, 677, 745, 828, 901, 969, 1052, 1120, 1188, 1271]},
          {stop: "El Redondo Drive (Jenner Drive)", times: [393, 461, 544, 612, 680, 748, 831, 904, 972, 1055, 1123, 1191, 1274]},
          {stop: "Compass Pointe Apartments (Pacific Drive)", times: [395, 463, 546, 614, 682, 750, 833, 906, 974, 1057, 1125, 1193, 1276]},
          {stop: "Merced College The Bus Terminal", times: [400, 468, 551, 619, 687, 755, 838, 911, 979, 1062, 1130, 1198, 1281]},
          {stop: "M Street & Bellevue Road (Bellevue Ranch)", times: [406, 474, 557, 625, 693, 761, 844, 917, 985, 1068, 1136, 1204, 1287]},
          {stop: "University Transit Center (UTC)", times: [417, 500, 568, 636, 704, 787, 855, 928, 1011, 1079, 1147, 1230, 1298]},
          {stop: "Amtrak Train Station", times: [438, 521, 589, 657, 725, 808, 876, 949, 1032, 1100, 1168, 1251, 1319]},
          {stop: "K Street Between 18th Street & 19th Street", times: [440, 523, 591, 659, 727, 810, 883, 951, 1034, 1102, 1170, 1253, 1321]},
          {stop: "UC Merced Downtown Campus Center", times: [442, 525, 593, 661, 729, 812, 885, 953, 1036, 1104, 1172, 1255, 1323]},
          {stop: "Merced Transpo", times: [442, 525, 593, 661, 729, 812, 885, 953, 1036, 1104, 1172, 1255, 1323]},
          {stop: "R Street Village Apartments", times: [458, 541, 609, 677, 745, 828, 901, 969, 1052, 1120, 1188, 1271]},

        ]
      },
      {
        route: "FastCat",
        weekday: [
          {stop: "University Surgery Center", times: [395, 459, 538, 602, 666, 745, 809, 876, 940, 1019, 1083, 1147, 1211, 1290]},
          {stop: "Promenade Center", times: [399, 463, 542, 606, 670, 749, 813, 880, 944, 1023, 1087, 1151, 1215, 1294]},
          {stop: "Yosemite Crossings Shopping Center", times: [402, 466, 545, 609, 673, 752, 816, 883, 947, 1026, 1090, 1154, 1218, 1297]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [404, 468, 547, 611, 675, 754, 818, 885, 949, 1028, 1092, 1156, 1220, 1299]},
          {stop: "Cardella Road & M Street", times: [408, 472, 551, 615, 679, 758, 822, 889, 953, 1032, 1096, 1160, 1224, 1303]},
          {stop: "M Street & Bellevue Road (Bellevue Ranch)", times: [412, 476, 555, 619, 683, 762, 826, 893, 957, 1036, 1100, 1164, 1228, 1307]},
          {stop: "University Transit Center (UTC)", times: [423, 502, 566, 630, 694, 773, 837, 904, 983, 1047, 1111, 1175, 1254, 1318]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [433, 512, 576, 640, 704, 783, 847, 914, 993, 1057, 1121, 1185, 1264, 1328]},
          {stop: "Yosemite & Cordova (Merced Physician Center)", times: [436, 515, 579, 643, 707, 786, 850, 917, 996, 1060, 1124, 1188, 1267, 1331]},
          {stop: "University Surgery Center", times: [439, 518, 582, 646, 710, 789, 853, 920, 999, 1063, 1127, 1191, 1270, 1334]},
          {stop: "Moraga Subdivision", times: [442, 521, 585, 649, 713, 792, 859, 923, 1002, 1066, 1130, 1194, 1273, 1337]},
          {stop: "University Transit Center (UTC)", times: [450, 529, 593, 657, 736, 800, 867, 931, 1010, 1074, 1138, 1202, 1281, 1345]},
          {stop: "University Surgery Center", times: [459, 538, 602, 666, 745, 809, 876, 940, 1019, 1083, 1147, 1211, 1290]},
        ]
      },
      {
        route: "FastCat 2",
        weekday: [
          {stop: "University Surgery Center", times: [510, 574, 653, 717, 781, 860, 924, 991, 1070, 1134, 1213, 1277]},
          {stop: "Promenade Center", times: [514, 578, 657, 721, 785, 864, 928, 995, 1074, 1138, 1217, 1281]},
          {stop: "Yosemite Crossings Shopping Center", times: [517, 581, 660, 724, 788, 867, 931, 998, 1077, 1141, 1220, 1284]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [519, 583, 662, 726, 790, 869, 933, 1000, 1079, 1143, 1222, 1286]},
          {stop: "Cardella Road & M Street", times: [523, 587, 666, 730, 794, 873, 937, 1004, 1083, 1147, 1226, 1290]},
          {stop: "M Street & Bellevue Road (Bellevue Ranch)", times: [527, 591, 670, 734, 798, 877, 941, 1008, 1087, 1151, 1230, 1294]},
          {stop: "University Transit Center (UTC)", times: [538, 617, 681, 745, 809, 888, 952, 1019, 1098, 1162, 1241, 1305]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [548, 627, 691, 755, 819, 898, 962, 1029, 1108, 1172, 1251, 1251]},
          {stop: "Yosemite & Cordova (Merced Physician Center)", times: [551, 630, 694, 758, 822, 901, 965, 1032, 1111, 1175, 1254, 1254]},
          {stop: "University Surgery Center", times: [554, 633, 697, 761, 825, 904, 968, 1035, 1114, 1178, 1257, 1257]},
          {stop: "Moraga Subdivision", times: [557, 636, 700, 764, 828, 907, 971, 1038, 1117, 1181, 1260, 1260]},
          {stop: "University Transit Center (UTC)", times: [565, 644, 708, 772, 851, 915, 982, 1061, 1125, 1204, 1268, 1268]},
          {stop: "University Surgery Center", times: [574, 653, 717, 781, 860, 924, 991, 1070, 1134, 1213, 1277, 1277]},
        ]
      },
      {
        route: "Yosemite Express",
        weekday: [
          {stop: "Moraga Subdivision", times: [540, 567, 594, 636, 663, 690, 717, 744, 771, 798, 840, 867, 894, 921, 963, 995, 1022, 1049, 1076, 1118, 1145, 1172, 1199, 1226, 1253, 1280, 1322]},
          {stop: "University Transit Center (UTC)", times: [547, 574, 616, 643, 670, 697, 724, 751, 778, 820, 847, 874, 901, 943, 970, 1002, 1029, 1056, 1098, 1125, 1152, 1179, 1206, 1233, 1260, 1302, 1329]},
          {stop: "Foothill Drive", times: [551, 578, 620, 647, 674, 701, 728, 755, 782, 824, 851, 878, 905, 947, 979, 1006, 1033, 1060, 1102, 1129, 1156, 1183, 1210, 1237, 1264, 1306, 1306]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [556, 583, 625, 652, 679, 706, 733, 760, 787, 829, 856, 883, 910, 952, 984, 1011, 1038, 1065, 1107, 1134, 1161, 1188, 1215, 1242, 1269, 1311, 1311]},
          {stop: "Raley's (G Street)", times: [559, 586, 628, 655, 682, 709, 736, 763, 790, 832, 859, 886, 913, 955, 987, 1014, 1041, 1068, 1110, 1137, 1164, 1191, 1218, 1245, 1272, 1194, 1194]},
          {stop: "University Surgery Center", times: [564, 591, 633, 660, 687, 714, 741, 768, 795, 837, 864, 891, 918, 960, 992, 1019, 1046, 1073, 1115, 1142, 1169, 1196, 1223, 1250, 1277, 1319, 1319]},
          {stop: "Moraga Subdivision", times: [567, 594, 636, 663, 690, 717, 744, 771, 798, 840, 867, 894, 921, 963, 995, 1022, 1049, 1076, 1118, 1145, 1172, 1199, 1226, 1253, 1280, 1322, 1322]},
        ]
      },
      {
        route: "E-1",
        weekend: [
          {stop: "University Transit Center (UTC)", times: [510, 582, 639, 711, 768, 840, 897, 954, 1014, 1086, 1143, 1200, 1272, 1329, 1386]},
          {stop: "Raley's (G Street)", times: [519, 591, 648, 720, 777, 849, 906, 963, 1023, 1095, 1152, 1209, 1281, 1338]},
          {stop: "Amtrak Train Station", times: [526, 598, 655, 727, 784, 856, 913, 970, 1030, 1102, 1159, 1216, 1288, 1345]},
          {stop: "K Street Between 18th Street & 19th Street", times: [528, 600, 657, 729, 786, 858, 915, 975, 1032, 1104, 1161, 1218, 1290, 1347]},
          {stop: "Walmart (Loughborough Drive)", times: [541, 613, 670, 742, 799, 871, 928, 988, 1045, 1117, 1174, 1231, 1303, 1360]},
          {stop: "Meadows Avenue & Olivewood Drive (Foodmaxx)", times: [543, 615, 672, 744, 801, 873, 930, 990, 1047, 1119, 1176, 1233, 1305, 1362]},
          {stop: "Merced Mall / Target", times: [547, 619, 676, 748, 805, 877, 934, 994, 1051, 1123, 1180, 1237, 1309, 1366]},
          {stop: "Rite Aid/Walgreens (G Street)", times: [554, 626, 683, 755, 812, 884, 941, 1001, 1058, 1130, 1187, 1244, 1316, 1373]},
          {stop: "Yosemite Crossings Shopping Center", times: [558, 630, 687, 759, 816, 888, 945, 1005, 1062, 1134, 1191, 1248, 1320, 1377]},
          {stop: "University Transit Center (UTC)", times: [582, 639, 711, 768, 840, 897, 954, 1014, 1086, 1143, 1200, 1272, 1329, 1386]},
        ]
      },
      {
        route: "E-2",
        weekend: [
          {stop: "University Transit Center (UTC)", times: [665, 729, 778, 827, 876, 940, 989, 1038, 1105, 1154, 1218, 1267, 1316]},
          {stop: "Promenade Center", times: [674, 738, 787, 836, 885, 949, 998, 1047, 1114, 1163, 1227, 1276]},
          {stop: "R Street Village Apartments", times: [680, 744, 793, 842, 891, 955, 1004, 1056, 1120, 1169, 1233, 1282]},
          {stop: "El Redondo Drive (Jenner Drive)", times: [683, 747, 796, 845, 894, 958, 1007, 1059, 1123, 1172, 1236, 1285]},
          {stop: "Compass Pointe Apartments (Pacific Drive)", times: [685, 749, 798, 847, 896, 960, 1009, 1061, 1125, 1174, 1238, 1287]},
          {stop: "Merced Mall / Target", times: [691, 755, 804, 853, 902, 966, 1015, 1067, 1131, 1180, 1244, 1293]},
          {stop: "M Street Village Apartments", times: [693, 757, 806, 855, 904, 968, 1017, 1069, 1133, 1182, 1246, 1295]},
          {stop: "Ironstone Drive & M Street", times: [697, 761, 810, 859, 908, 972, 1021, 1073, 1137, 1186, 1250, 1299]},
          {stop: "Yosemite & Cordova (Merced Physician Center)", times: [703, 767, 816, 865, 914, 978, 1027, 1079, 1143, 1192, 1256, 1305]},
          {stop: "Moraga Subdivision", times: [706, 770, 819, 868, 917, 981, 1030, 1082, 1146, 1195, 1259, 1308]},
          {stop: "University Transit Center (UTC)", times: [729, 778, 827, 876, 940, 989, 1038, 1105, 1154, 1218, 1267, 1316]},
        ]
      },
      
      {
        route: "Route UC (North Loop)",
        weekday: [
          {stop: "University Transit Center (UTC)", times: [407, 447, 487, 527, 567, 607, 647, 687, 727, 767, 807, 847, 887, 927, 967, 1007, 1047, 1087, 1127, 1167]},
          {stop: "Paulson Ave & Yosemite Ave (Opposite of Promenade)", times: [417, 457, 497, 537, 577, 617, 657, 697, 737, 777, 817, 857, 897, 937, 977, 1017, 1057, 1097, 1137, 1177]},
          {stop: "Tri-College / Mercy Hospital (G Street)", times: [424, 464, 504, 544, 584, 624, 664, 704, 744, 784, 824, 864, 904, 944, 984, 1024, 1064, 1104, 1144, 1184]},
          {stop: "Merced College The Bus Terminal", times: [426, 466, 506, 546, 586, 626, 666, 706, 746, 786, 826, 866, 906, 946, 986, 1026, 1066, 1106, 1146, 1186]},
          {stop: "M Street & Olive Avenue", times: [431, 471, 511, 551, 591, 631, 671, 711, 751, 791, 831, 871, 911, 951, 991, 1031, 1071, 1111, 1151, 1191]},
          {stop: "Amtrak Train Station", times: [436, 476, 516, 556, 596, 636, 676, 716, 756, 796, 836, 876, 916, 956, 996, 1036, 1076, 1116, 1156, 1196]},
          {stop: "Merced Transpo", times: [441, 481, 521, 561, 601, 641, 681, 721, 761, 801, 841, 881, 921, 961, 1001, 1041, 1081, 1121, 1161, 1201]},
          {stop: "University Transit Center (UTC)", times: [447, 487, 527, 567, 607, 647, 687, 727, 767, 807, 847, 887, 927, 967, 1007, 1047, 1087, 1127, 1167]},
        ]
      },
      {
        route: "Route UC (South Loop)",
        weekday: [
          {stop: "Merced Transpo", times: [370, 410, 450, 490, 530, 570, 610, 650, 690, 730, 770, 810, 850, 890, 930, 970, 1010, 1050, 1090, 1130, 1170]},
          {stop: "The Bus MCAG Office", times: [373, 413, 453, 493, 533, 573, 613, 653, 693, 733, 773, 813, 853, 893, 933, 973, 1013, 1053, 1093, 1133, 1173]},
          {stop: "Amtrak Train Station", times: [375, 415, 455, 495, 535, 575, 615, 655, 695, 735, 775, 815, 855, 895, 935, 975, 1015, 1055, 1095, 1135, 1175]},
          {stop: "M Street & Olive Avenue", times: [380, 420, 460, 500, 540, 580, 620, 660, 700, 740, 780, 820, 860, 900, 940, 980, 1020, 1060, 1100, 1140, 1180]},
          {stop: "Merced College The Bus Terminal", times: [385, 425, 465, 505, 545, 585, 625, 665, 705, 745, 785, 825, 865, 905, 945, 985, 1025, 1065, 1105, 1145, 1185]},
          {stop: "Merced College UC Parking", times: [386, 426, 466, 506, 546, 586, 626, 666, 706, 746, 786, 826, 866, 906, 946, 986, 1026, 1066, 1106, 1146, 1186]},
          {stop: "Paulson Ave & Yosemite Ave (Opposite of Promenade)", times: [393, 433, 473, 513, 553, 593, 633, 673, 713, 753, 793, 833, 873, 913, 953, 993, 1033, 1073, 1113, 1153, 1193]},
          {stop: "University Transit Center (UTC)", times: [402, 442, 482, 522, 562, 602, 642, 682, 722, 762, 802, 842, 882, 922, 962, 1002, 1042, 1082, 1122, 1162, 1202]},
          {stop: "Merced Transpo", times: [410, 450, 490, 530, 570, 610, 650, 690, 730, 770, 810, 850, 890, 930, 970, 1010, 1050, 1090, 1130, 1170]},
        ]
      }
    ];

// ------------------- Priority Queue -------------------
class MinHeap {
  constructor() {
    this.heap = [];
  }

  push(node) {
    this.heap.push(node);
    this._bubbleUp();
  }

  pop() {
    if (this.heap.length <= 1) return this.heap.pop();
    const top = this.heap[0];
    this.heap[0] = this.heap.pop();
    this._sinkDown();
    return top;
  }

  isEmpty() {
    return this.heap.length === 0;
  }

  _bubbleUp() {
    let i = this.heap.length - 1;
    while (i > 0) {
      const parent = Math.floor((i - 1) / 2);
      if (this.heap[i].arrivalTime >= this.heap[parent].arrivalTime) break;
      [this.heap[i], this.heap[parent]] = [this.heap[parent], this.heap[i]];
      i = parent;
    }
  }

  _sinkDown() {
    let i = 0;
    const len = this.heap.length;
    while (true) {
      let left = 2 * i + 1, right = 2 * i + 2, smallest = i;
      if (left < len && this.heap[left].arrivalTime < this.heap[smallest].arrivalTime) smallest = left;
      if (right < len && this.heap[right].arrivalTime < this.heap[smallest].arrivalTime) smallest = right;
      if (smallest === i) break;
      [this.heap[i], this.heap[smallest]] = [this.heap[smallest], this.heap[i]];
      i = smallest;
    }
  }
}

function clampInputValue(inputId, min, max) {
  const input = document.getElementById(inputId);
  if (!input) {
    console.warn(`Input element with id "${inputId}" not found.`);
    return;
  }

  input.addEventListener("blur", () => {
    let value = parseInt(input.value);
    if (isNaN(value)) return;
    if (value < min) value = min;
    if (value > max) value = max;
    input.value = value.toString().padStart(2, "0");
  });
}

// ------------------- Time Helpers -------------------
function timeToMinutes(str) {
  const [h, m] = str.split(":").map(Number);
  return h * 60 + m;
}

function minutesToTime(timeStr){
  let hour = Math.trunc(timeStr / 60)
  const mins = timeStr % 60
  let day_period = "AM"
  if(hour > 12){
    day_period = "PM"
    hour = hour % 12
  }
  return `${hour}:${mins.toString().padStart(2, "0")} ${day_period}`;
}

function to12Hour(timeStr) {
  let [h, m] = timeStr.split(":").map(Number);
  const ampm = h >= 12 ? "PM" : "AM";
  h = h % 12 || 12;
  return `${h}:${m.toString().padStart(2, "0")} ${ampm}`;
}

function getStartTimeInMinutes() {
  let hour = parseInt(document.getElementById("hour").value, 10) || 0;
  let minute = parseInt(document.getElementById("minute").value, 10) || 0;
  const ampm = document.getElementById("ampm").value;
  if (ampm === "PM" && hour !== 12) hour += 12;
  if (ampm === "AM" && hour === 12) hour = 0;
  return hour * 60 + minute;
}


// ------------------- Graph Construction -------------------
let graph = { weekday: {}, weekend: {} };
routesData.forEach(({ route, weekday, weekend }) => {
  if (weekday) addRouteToGraph(graph.weekday, route, weekday);
  if (weekend) addRouteToGraph(graph.weekend, route, weekend);
});

function addRouteToGraph(graphPart, route, stops) {
  for (let i = 0; i < stops.length - 1; i++) {
    const from = stops[i];
    const to = stops[i + 1];

    if (!graphPart[from.stop]) graphPart[from.stop] = [];
    if (!graphPart[to.stop]) graphPart[to.stop] = [];

    const pairCount = Math.min(from.times.length, to.times.length);

    for (let j = 0; j < pairCount; j++) {
      const departTime = from.times[j];
      const arriveTime = to.times[j];

      if (!departTime || !arriveTime) continue; // defensive check

      graphPart[from.stop].push({
        to: to.stop,
        route,
        departTime,
        arriveTime
      });

      graphPart[to.stop].push({
        to: from.stop,
        route,
        departTime: arriveTime,
        arriveTime: departTime
      });
    }
  }
}

// ------------------- Dijkstra-like Route Finder -------------------

function findArrivalTimeOptimizedRoute(graphPart, start, end, timeMinutes, mode = "depart") {
  return mode === "arrive"
    ? findRouteArriveBy(graphPart, start, end, timeMinutes)
    : findRouteDepartAfter(graphPart, start, end, timeMinutes);
}

function findRouteArriveBy(graphPart, start, end, endMinutes) {
  const queue = [{
    stop: end,
    time: endMinutes,
    path: []
  }];

  const visited = new Map(); // key: stop, value: latest time visited
  let bestPaths = [];
  let busChangesForPaths = []; 

  while (queue.length > 0) {
    // Prioritize later arrival time and fewer bus changes
    queue.sort((a, b) => b.time - a.time || a.bus_changes - b.bus_changes);
    const current = queue.shift();

    const prevTime = visited.get(current.stop);
    if (prevTime !== undefined && prevTime >= current.time) continue;
    visited.set(current.stop, current.time);

    if (current.stop === start && current.path[0].arriveTime > endMinutes - 180) {
      bestPaths.push(current.path);
      let total_bus_changes = 0;
      for(let i = 1; i < current.path.length; i++){
        if(current.path[i].route != current.path[i - 1].route){
          total_bus_changes++;
        }
      }
      busChangesForPaths.push(total_bus_changes);
      continue;
    }

    for (const fromStop in graphPart) {
      for (const edge of graphPart[fromStop]) {
        if (edge.to !== current.stop) continue;

        const depart = edge.departTime;
        const arrive = edge.arriveTime;

        // Only consider edges that arrive before current time
        if (arrive > current.time || arrive < depart) continue;

        queue.push({
          stop: fromStop,
          time: depart,
          path: [{
            from: fromStop,
            to: current.stop,
            route: edge.route,
            departTime: edge.departTime,
            arriveTime: edge.arriveTime
          }, ...current.path]
        });
      }
    }
  }

  let result_path=[];
  let init_val = Math.min(...busChangesForPaths);
  let optimizedPaths = [];
  let l = 0;
  busChangesForPaths.forEach((num, index) => {
    if (num === init_val) {
      optimizedPaths[l] = bestPaths[index];
      l++
    }
  });
  if(!bestPaths[0]){
    return null;
  }
  let tempArrivalTime = bestPaths[0].at(-1).arriveTime;
  result_path[0] = optimizedPaths[0];
  for(let i = 1; i < bestPaths.length; i++){
    if(bestPaths[i].at(-1).arriveTime < tempArrivalTime){
      tempArrivalTime = bestPaths[i].at(-1).arriveTime;
      result_path[0] = bestPaths[i];
    }
  }
  tempArrivalTime = optimizedPaths[0].at(-1).arriveTime;
  result_path[1] = optimizedPaths[0];
  for(let j = 1; j < optimizedPaths.length; j++){
    if(optimizedPaths[j].at(-1).arriveTime < tempArrivalTime){
      tempArrivalTime = optimizedPaths[j].at(-1).arriveTime;
      result_path[1] = optimizedPaths[j];
    }
  }
  return result_path || null;
}

function findRouteDepartAfter(graphPart, start, end, startMinutes) {
  const queue = [{
    stop: start,
    time: startMinutes,
    path: []
  }];

  const visited = new Map();
  let bestPaths = [];
  let busChangesForPaths = [];

  while (queue.length > 0) {
    queue.sort((a, b) => b.time - a.time || a.bus_changes - b.bus_changes);
    const current = queue.shift();
    const prevTime = visited.get(current.stop);
    if (prevTime !== undefined && prevTime <= current.time) continue;
    visited.set(current.stop, current.time);

    if (current.stop === end && current.path[0].departTime < startMinutes + 180) {
      bestPaths.push(current.path);
      let total_bus_changes = 0;
      for(let i = 1; i < current.path.length; i++){
        if(current.path[i].route != current.path[i - 1].route){
          total_bus_changes++;
        }
      }
      busChangesForPaths.push(total_bus_changes);
      continue;
    }

    const neighbors = graphPart[current.stop] || [];
    for (const edge of neighbors) {
      const depart = edge.departTime;
      const arrive = edge.arriveTime;

      if (
        (current.path.length === 0 && depart < startMinutes) ||
        arrive < depart ||
        depart < current.time
      ) {
        continue;
      }

      queue.push({
        stop: edge.to,
        time: arrive,
        path: [
          ...current.path,
          {
            from: current.stop,
            to: edge.to,
            route: edge.route,
            departTime: edge.departTime,
            arriveTime: edge.arriveTime
          }
        ]
      });
    }
  }
  let result_path=[];
  let init_val = Math.min(...busChangesForPaths);
  let optimizedPaths = [];
  let l = 0;
  busChangesForPaths.forEach((num, index) => {
    if (num === init_val) {
      optimizedPaths[l] = bestPaths[index];
      l++
    }
  });

  if(!bestPaths[0]){
    return null;
  }
  let tempArrivalTime = bestPaths[0].at(-1).arriveTime;
  for(let i = 1; i < bestPaths.length; i++){
    if(bestPaths[i].at(-1).arriveTime < tempArrivalTime){
      tempArrivalTime = bestPaths[i].at(-1).arriveTime;
      result_path[0] = bestPaths[i];
    }
  }
  tempArrivalTime = optimizedPaths[0].at(-1).arriveTime;
  for(let j = 1; j < optimizedPaths.length; j++){
    if(optimizedPaths[j].at(-1).arriveTime < tempArrivalTime){
      tempArrivalTime = optimizedPaths[j].at(-1).arriveTime;
      result_path[1] = optimizedPaths[j];
    }
  }
  return result_path || null;
}







// ------------------- Plan Trip Logic -------------------
function planTrip() {
  const start = document.getElementById("start").value.trim();
  const end = document.getElementById("end").value.trim();
  const scheduleType = document.querySelector('input[name="scheduleType"]:checked')?.value || "weekday";
  const startMinutes = getStartTimeInMinutes();
  const header = document.getElementById("result-header");
  const output = document.getElementById("fastest-result");
  const output1 = document.getElementById("optimized-result");
  const checklist = document.querySelectorAll('input[name="route_name"]:checked');
  let list = [];

  checklist.forEach((checkbox) => {
    list.push(checkbox.value);
  });

  

  graph = { weekday: {}, weekend: {} };
  routesData.forEach(({ route, weekday, weekend }) => {
    if (weekday && list.includes(route)) addRouteToGraph(graph.weekday, route, weekday);
    if (weekend && list.includes(route)) addRouteToGraph(graph.weekend, route, weekend);
  });
  header.innerHTML = "";

  const stopNames = Array.from(new Set([
    ...Object.keys(graph.weekday),
    ...Object.keys(graph.weekend)
  ])).sort();


  if(!stopNames.includes(end) || !stopNames.includes(start)){
    header.textContent = "Please enter valid start and end location names.";
    output.innerHTML = "";
    output1.innerHTML = "";
    return;
  }

  startArray = JSON.parse(localStorage.getItem('myStartValue'));
  startArray.unshift(start);
  startArray = new Set(startArray);
  startArray = [...startArray];
  if(startArray != null && startArray.length > 5){
    startArray.pop();
  }
  
  endArray = JSON.parse(localStorage.getItem('myEndValue'));
  endArray.unshift(end);
  endArray = new Set(endArray);
  endArray = [...endArray];
  if(endArray != null && endArray.length > 5){
    endArray.pop();
  }

  localStorage.setItem('myStartValue', JSON.stringify(startArray));
  localStorage.setItem('myEndValue', JSON.stringify(endArray));


  if (!start || !end) {
    header.textContent = "Please enter both start and end locations.";
    output.innerHTML = "";
    output1.innerHTML = "";
    return;
  }

  if(start === end){
    header.textContent = "Please enter different start and end locations.";
    output.innerHTML = "";
    output1.innerHTML = "";
    return;
  }

  const graphPart = graph[scheduleType];
  const timeMode = document.querySelector('input[name="timeMode"]:checked')?.value || "depart";
  const path = findArrivalTimeOptimizedRoute(graphPart, start, end, startMinutes, timeMode);


  if (!path || path.length === 0) {
    header.textContent = "No route found between these locations at this time.";
    output.innerHTML = "";
    output1.innerHTML = "";
    return;
  }



  header.innerHTML = `<strong>Trip from "${start}" to "${end}":</strong><br><br>`;
  var repeated_bus_line = false;
  var current_line = "";
  var last_stop = "";
  var upcoming_stop = "";
  var lastDepartTime = "";
  var lastArriveTime = "";
  var j = 1;
  if(timeMode){
    output.innerHTML = '<strong>Fastest Route</strong><br>';
    output1.innerHTML = '<strong>Optimized Route</strong><br>';
    path[0].forEach((step, i) => {
      if(i == 0){
        current_line = step.route;
        last_stop = step.from;
        upcoming_stop = step.to;
        lastDepartTime = step.departTime;
        lastArriveTime = step.arriveTime;
        if(path[0].length == 1){
            output.innerHTML += `
          ${j}. Take <strong>${step.route}</strong> from "<em>${step.from}</em>" to "<em>${step.to}</em>"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(step.departTime)}</strong>, Arrive: <strong>${minutesToTime(step.arriveTime)}</strong><br><br>`;
        }
      }else{
        if(step.route != current_line){
          output.innerHTML += `
          ${j}. Take <strong>${current_line}</strong> from "<em>${last_stop}</em>" to "<em>${upcoming_stop}</em>"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(lastDepartTime)}</strong>, Arrive: <strong>${minutesToTime(lastArriveTime)}</strong><br><br>`;
          j++;
          current_line = step.route;
          last_stop = step.from;
          upcoming_stop = step.to;
          lastDepartTime = step.departTime;
          lastArriveTime = step.arriveTime;
          if(i + 1 == path[0].length){
            output.innerHTML += `
          ${j}. Take <strong>${step.route}</strong> from "<em>${step.from}</em>" to "<em>${step.to}</em>"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(step.departTime)}</strong>, Arrive: <strong>${minutesToTime(step.arriveTime)}</strong><br><br>`;
          }
        }
        else{
          upcoming_stop = step.to;
          lastArriveTime = step.arriveTime;
          if(i + 1 == path[0].length){
            output.innerHTML += `
            ${j}. Take <strong>${current_line}</strong> from "<em>${last_stop}</em>" to "<em>${upcoming_stop}</em>"<br>
            &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(lastDepartTime)}</strong>, Arrive: <strong>${minutesToTime(step.arriveTime)}</strong><br><br>`;
          }
        }
      }
    });

    j = 1;
    path[1].forEach((step, i) => {
      if(i == 0){
        current_line = step.route;
        last_stop = step.from;
        upcoming_stop = step.to;
        lastDepartTime = step.departTime;
        lastArriveTime = step.arriveTime;
        if(path[1].length == 1){
            output1.innerHTML += `
          ${j}. Take <strong>${step.route}</strong> from "<em>${step.from}</em>" to "<em>${step.to}</em>"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(step.departTime)}</strong>, Arrive: <strong>${minutesToTime(step.arriveTime)}</strong><br><br>`;
        }
      }else{
        if(step.route != current_line){
          output1.innerHTML += `
          ${j}. Take <strong>${current_line}</strong> from "<em>${last_stop}</em>" to "<em>${upcoming_stop}</em>"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(lastDepartTime)}</strong>, Arrive: <strong>${minutesToTime(lastArriveTime)}</strong><br><br>`;
          j++;
          current_line = step.route;
          last_stop = step.from;
          upcoming_stop = step.to;
          lastDepartTime = step.departTime;
          lastArriveTime = step.arriveTime;
          if(i + 1 == path[1].length){
            output1.innerHTML += `
          ${j}. Take <strong>${step.route}</strong> from "<em>${step.from}</em>" to "<em>${step.to}</em>"<br>
          &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(step.departTime)}</strong>, Arrive: <strong>${minutesToTime(step.arriveTime)}</strong><br><br>`;
          }
        }
        else{
          upcoming_stop = step.to;
          lastArriveTime = step.arriveTime;
          if(i + 1 == path[1].length){
            output1.innerHTML += `
            ${j}. Take <strong>${current_line}</strong> from "<em>${last_stop}</em>" to "<em>${upcoming_stop}</em>"<br>
            &nbsp;&nbsp;&nbsp;&nbsp;Depart: <strong>${minutesToTime(lastDepartTime)}</strong>, Arrive: <strong>${minutesToTime(step.arriveTime)}</strong><br><br>`;
          }
        }
      }
    });
  }
}



// ------------------- Autocomplete Setup -------------------


function setupAutocomplete(inputId, dropdownId) {
  const input = document.getElementById(inputId);
  const dropdown = document.getElementById(dropdownId);

  const stopNames = Array.from(new Set([
  ...Object.keys(graph.weekday),
  ...Object.keys(graph.weekend)
])).sort();

  input.addEventListener("click", () => {
  if(input.value){
    input.dispatchEvent(new Event("input"));
  }
  dropdown.innerHTML = "";
  let focusSuggestions = JSON.parse(localStorage.getItem('my' + inputId.charAt(0).toUpperCase() + inputId.slice(1) + 'Value'));
  if(focusSuggestions == null){
    focusSuggestions = [
      "University Transit Center (UTC)",
      "Amtrak Train Station",
      "Merced Mall / Target",
      "Yosemite Crossings Shopping Center",
      "Walmart (Loughborough Drive)"
    ];
    localStorage.setItem('my' + inputId.charAt(0).toUpperCase() + inputId.slice(1) + 'Value', JSON.stringify(focusSuggestions));
  }
  focusSuggestions.forEach(itemText => {
    const item = document.createElement("div");
    item.className = "autocomplete-item";
    item.textContent = itemText;
    item.onclick = () => {
      input.value = itemText;
      dropdown.innerHTML = "";
      dropdown.style.display = "none";
    };
    dropdown.appendChild(item);
  });
  dropdown.style.display = "block";
});


  input.addEventListener("input", () => {
    
    const value = input.value.trim().toLowerCase();
    dropdown.innerHTML = "";

    if (!value) {
      dropdown.style.display = "none";
      return;
    }

    const matches = stopNames.filter(stop =>
      stop.toLowerCase().includes(value)
    ).slice(0, 10);

    if (matches.length === 0) {
      dropdown.style.display = "none";
      return;
    }

    matches.forEach(match => {
      const item = document.createElement("div");
      item.className = "autocomplete-item";
      item.textContent = match;
      item.onclick = () => {
        input.value = match;
        dropdown.innerHTML = "";
        dropdown.style.display = "none";
      };
      dropdown.appendChild(item);
    });

    dropdown.style.display = "block";
  });

  // Close dropdown if clicking outside
  document.addEventListener("click", e => {
    if (!dropdown.contains(e.target) && e.target !== input) {
      dropdown.innerHTML = "";
      dropdown.style.display = "none";
    }
  });
}

function selectAll(){
const checkboxes = document.querySelectorAll('input[name="route_name"]');
  checkboxes.forEach(cb => cb.checked = true);
}

function deselectAll(){
const checkboxes = document.querySelectorAll('input[name="route_name"]');
  checkboxes.forEach(cb => cb.checked = false);
}


function summerRoutes(){
  const checkboxes = document.querySelectorAll('input[name="route_name"]');
    checkboxes.forEach(cb => {
    const route_list = ["Bobcat Express", "C-1", "C-2", "FastCat", "G-Line", "Route UC (North Loop)", "Route UC (South Loop)"];
    if(route_list.includes(cb.value)){
      cb.checked = true;
    }else{
      cb.checked = false;
    }
  });
}

window.onload = () => {
  startInput = document.getElementById("start");
  endInput = document.getElementById("end");
  
  const checkboxes = document.querySelectorAll('input[name="route_name"]');
  checkboxes.forEach(cb => cb.checked = true);
  setupAutocomplete("start", "start-autocomplete");
  setupAutocomplete("end", "end-autocomplete");
  clampInputValue("hour", 1, 12);   // Clamp to 1–12
  clampInputValue("minute", 0, 59); // Clamp to 0–59

/*  //saved input autofill
  const savedStartValue = localStorage.getItem('myStartValue');
  const savedEndValue = localStorage.getItem('myEndValue');
  if (savedStartValue) {
    startInput.value = savedStartValue;
  }
  if (savedEndValue) {
    endInput.value = savedEndValue;
  }*/
};



</script>
